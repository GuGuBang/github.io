<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="学习Linux的过程以及生活!">
<meta name="keywords" content="Linux, Hexo">
<meta property="og:type" content="website">
<meta property="og:title" content="GuGuBang Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="GuGuBang Blog">
<meta property="og:description" content="学习Linux的过程以及生活!">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GuGuBang Blog">
<meta name="twitter:description" content="学习Linux的过程以及生活!">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>GuGuBang Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">GuGuBang Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">成为我的树洞</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux常用命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GuGuBang Zu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GuGuBang Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux常用命令/" itemprop="url">Linux常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-22T22:31:00+00:00">
                2019-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5k
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a><strong>tar</strong></h3><ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zcvf file.tar.gz dir_path  <span class="comment"># 打包并压缩一个文件夹</span></span><br><span class="line">$ tar -zcvf file.tar.gz file1, file2, file3 <span class="comment"># 打包并压缩多个文件</span></span><br><span class="line">$ tar -zxvf file.tar.gz  <span class="comment"># 解压一个压缩文件到当前目录</span></span><br><span class="line">$ tar -zxvf file.tar.gz -c dir_path <span class="comment"># 解压一个压缩文件到指定目录</span></span><br></pre></td></tr></table></figure>





</li>
</ul>
<h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a><strong>ssh</strong></h3><ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@192.168.20.131  </span><br><span class="line">$ ssh 192.168.20.131 -p 22 -l root  <span class="comment"># 与上面的方式相同</span></span><br><span class="line">$ ssh -v root@192.168.20.131  <span class="comment"># 调试模式</span></span><br><span class="line">$ ssh-keygen -R hostname  <span class="comment"># SSH中“HOST KEY VERIFICATION FAILED.“的解决方案</span></span><br><span class="line">$ scp file1, file2 root@192.168.20.131:/root/  <span class="comment"># ssh远程复制传输命令</span></span><br><span class="line"></span><br><span class="line">$ vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line">	PermitRootLogin  yes  <span class="comment"># 允许root用户远程登陆</span></span><br><span class="line">	port  123  <span class="comment"># 修改端口</span></span><br><span class="line">	</span><br><span class="line">$ service sshd restart 重启sshd服务</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="yum"><a href="#yum" class="headerlink" title="yum"></a><strong>yum</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/yum.repos.d/  <span class="comment"># yum源所在目录</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ yum search vim  <span class="comment"># 搜索与vim相关的包</span></span><br><span class="line">$ yum list |grep vim  <span class="comment"># 搜索与vim相关的包</span></span><br><span class="line">$ yum clean all  <span class="comment"># 清除yum缓存</span></span><br><span class="line">$ yum makecache  <span class="comment"># 生成yum缓存</span></span><br><span class="line">$ yum repolist enabled  <span class="comment"># 查看可用yum源</span></span><br><span class="line">$ yum repolist all  <span class="comment"># 查看所有yum源</span></span><br><span class="line">$ yum --disablerepo=\* --enablerepo=c7-media install net-tools  <span class="comment">#从光盘镜像中安装net-tools</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="rmp"><a href="#rmp" class="headerlink" title="rmp"></a><strong>rmp</strong></h3><ul>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-ivh 安装显示安装进度--install--verbose--<span class="built_in">hash</span></span><br><span class="line">-Uvh 升级软件包--Update；</span><br><span class="line">-qpl 列出RPM软件包内的文件信息[Query Package list]；</span><br><span class="line">-qpi 列出RPM软件包的描述信息[Query Package install package(s)]；</span><br><span class="line">-qf  查找指定文件属于哪个RPM软件包[Query File]；</span><br><span class="line">-Va  校验所有的RPM软件包，查找丢失的文件[View Lost]；</span><br><span class="line">-e   删除包</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -qa | grep httpd　<span class="comment"># 搜索httpd包的文件</span></span><br><span class="line">$ rpm -ql httpd　　　　  <span class="comment"># 列出httpd的所有文件安装目录</span></span><br><span class="line">$ rmp -e httpd          <span class="comment"># 删除httpd包</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a><strong>正则表达式</strong></h3><ul>
<li><p><strong>扩展正则ERE与基础正则BRE</strong></p>
<p>扩展正则表达式与基础正则表达式的唯一区别在于 ? + () {} | 这几个字符。</p>
<p>基础正则表达式中，如果你想 ? + () {} | 表示特殊含义，你需要将他们转义。</p>
<p>扩展正则表达式中，如果你想 ? + () {} |  不表示特殊含义(即它们的本意)，你需要将他们转义。</p>
<ul>
<li><p>基础正则的特殊字符</p>
<p>[ ] * . \ ^ $ </p>
</li>
<li><p>扩展正则的特殊字符</p>
<p>[ ] * . \ ^ $ ? + ( ) { } | </p>
</li>
</ul>
</li>
<li><p><strong>常用符号</strong></p>
<p>.    表示任意单个字符。</p>
<p>*   表示前面的字符连续出现任意次，包括0次。</p>
<p>.*  表示任意长度的任意字符，与通配符中的*的意思相同。</p>
<p>\    表示转义符，当与正则表达式中的符号结合时表示符号本身。</p>
<p>|   表示”或者”之意</p>
<p>[  ] 表示匹配指定范围内的任意单个字符。</p>
<p>[^] 表示匹配指定范围外的任意单个字符。</p>
</li>
<li><p><strong>次数匹配相关</strong></p>
<p>?   表示匹配其前面的字符0或1次</p>
<p>+表示匹配其前面的字符至少1次，或者连续多次，连续次数上不封顶。</p>
<p>{n} 表示前面的字符连续出现n次，将会被匹配到。</p>
<p>{x,y} 表示之前的字符至少连续出现x次，最多连续出现y次，都能被匹配到，换句话说，只要之前的字符连续出现的次数在x与y之间，即可被匹配到。</p>
<p>{,n } 表示之前的字符连续出现至多n次，最少0次，都会陪匹配到。</p>
<p>{n,} 表示之前的字符连续出现至少n次，才会被匹配到。</p>
</li>
<li><p><strong>位置边界匹配相关</strong></p>
<p>^：表示锚定行首，此字符后面的任意内容必须出现在行首，才能匹配。</p>
<p>$：表示锚定行尾，此字符前面的任意内容必须出现在行尾，才能匹配。</p>
<p>^$：表示匹配空行，这里所描述的空行表示”回车”，而”空格”或”tab”等都不能算作此处所描述的空行。</p>
<p>^abc$：表示abc独占一行时，会被匹配到。</p>
<p>&lt;或者\b：匹配单词边界，表示锚定词首，其后面的字符必须作为单词首部出现。</p>
<p>&gt;或者\b：匹配单词边界，表示锚定词尾，其前面的字符必须作为单词尾部出现。</p>
<p>\B：匹配非单词边界，与\b正好相反。</p>
</li>
<li><p><strong>分组与后向引用</strong></p>
<p>( )表示分组，我们可以将其中的内容当做一个整体，分组可以嵌套。</p>
<p>(ab)表示将ab当做一个整体去处理。</p>
<p>\1表示引用整个表达式中第1个分组中的正则匹配到的结果。</p>
<p>\2表示引用整个表达式中第2个分组中的正则匹配到的结果。</p>
</li>
<li><p><strong>单个字符匹配相关</strong></p>
<p>\b 匹配一个单词边界，也就是指单词和空格间的位置。</p>
<p>\B 匹配非单词边界。</p>
<p>\cx 匹配由x指明的控制字符。</p>
<p>\d 匹配一个数字字符。等价于 [0-9]。</p>
<p>\D 匹配一个非数字字符。等价于 [^0-9]。</p>
<p>\f 匹配一个换页符。</p>
<p>\n 匹配一个换行符。</p>
<p>\r 匹配一个回车符。</p>
<p>\s 匹配任何空白字符，包括空格、制表符、换页符等等。</p>
<p>[[:alpha:]]  表示任意大小写字母。</p>
<p>[[:lower:]]  表示任意小写字母。</p>
<p>[[:upper:]]  表示任意大写字母。</p>
<p>[[:digit:]]表示0到9之间的任意单个数字（包括0和9）。</p>
<p>[[:alnum:]]表示任意数字或字母。</p>
<p>[[:space:]]表示任意空白字符，包括”空格”、”tab键”等。</p>
<p>[[:punct:]]表示任意标点符号。</p>
<p>[^[:alpha:]]表示单个非字母字符。</p>
<p>[^[:lower:]]表示单个非小写字母字符。</p>
<p>[^[:upper:]]表示单个非大写字母字符。</p>
<p>[^[:digit:]]表示单个非数字字符。</p>
<p>[^[:alnum:]]表示单个非数字非字母字符。</p>
<p>[^[:space:]]表示单个非空白字符。</p>
<p>[^[:punct:]]表示单个非标点符号字符。</p>
<p>[0-9]与[[:digit:]]等效。</p>
<p>[a-z]与[[:lower:]]等效。</p>
<p>[A-Z]与[[:upper:]]等效。</p>
<p>[a-zA-Z]与[[:alpha:]]等效。</p>
<p>[a-zA-Z0-9]与[[:alnum:]]等效。</p>
<p>[^0-9]与[^[:digit:]]等效。</p>
<p>[^a-z]与[^[:lower:]]等效。</p>
<p>[^A-Z]与[^[:upper:]]等效</p>
<p>[^a-zA-Z]与[^[:alpha:]]等效</p>
<p>[^a-zA-Z0-9]与[^[:alnum:]]等效</p>
</li>
</ul>
<h3 id="awk"><a href="#awk" class="headerlink" title="awk"></a><strong>awk</strong></h3><ul>
<li><p><strong>格式</strong></p>
<p><code>awk [option] &#39;pattern {action}&#39; input-file</code></p>
</li>
<li><p><strong>内建变量</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$0</span> 表示整行</span><br><span class="line">NF 表示当前行被分割符切开以后,一共有几个字段</span><br><span class="line"><span class="variable">$NF</span> 表示当前行的最后一个字段</span><br><span class="line">$(NF-1) 表示倒数第二个字段</span><br><span class="line">FS 输入分隔符</span><br><span class="line">OFS 输出分隔符</span><br><span class="line">RS 输入行分割符</span><br><span class="line">NR 当前处理文本行的行号</span><br><span class="line">FNR 各文件分别计数的行号</span><br><span class="line">FILENAME  当前文件名</span><br><span class="line">ARGC 命令行参数的个数</span><br><span class="line">ARGV 数组, 保存的命令行所给定的个参数</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>模式</strong></p>
<p>即条件, awk会一行一行的处理文本中的每一行,如果满足条件(模式)的行才会被处理</p>
<ul>
<li><p>关系运算模式：</p>
<p> <code>x&lt;y, x==y, x&gt;=y, x!=y</code></p>
</li>
<li><p>两种特殊模式：</p>
<p>BEGIN 模式指定了处理文本之前需要执行的操作</p>
<p>END 模式指定了处理完所有行之后需要进行的操作</p>
</li>
<li><p>正则模式(默认使用扩展正则)：</p>
<p>x~/正则/ 与对应的正则匹配为真</p>
<p>x!~/正则/  与对应的正则匹配为假</p>
<p>使用次数匹配时  awk –re-interval  ‘/he{2,3}y/{print $0}’</p>
</li>
<li><p>行范围模式：</p>
<p>awk ‘/正则1/,/正则2/{print $0}’  从被正则1匹配到的行开始, 到被正则2匹配到的行结束, 之间的所有行都会执行对应的动作。</p>
<p>awk ‘NR&gt;=3 &amp;&amp; NR&lt;=6 {print $0}’  打印从第三行到第六行的行。</p>
</li>
</ul>
</li>
<li><p><strong>内置函数</strong></p>
<ul>
<li><p>sub函数: 只会替换指定范围内的第一次匹配到的符合条件的结果。</p>
</li>
<li><p>gsub函数: 会替换指定范围内的所有符合条件的字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &apos;&#123; gsub(&quot;[a-z]&quot;, &quot;6&quot;, $1); print $0&#125;&apos;  #把所有行的第一列的小写字母替换为&quot;6&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>length函数: 获取指定字符串的长度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123; for(i=1;i&lt;=NF;i++)&#123;print $i,length($1)&#125; &#125;'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>工作流程</strong></p>
<ul>
<li><p>读输入文件之前执行的代码段（由BEGIN关键字标识）。</p>
</li>
<li><p>主循环执行输入文件的代码段。</p>
</li>
<li><p>读输入文件之后的代码段（由END关键字标识）。</p>
</li>
<li><p><code>awk &#39;BEGIN{commands} pattern{commands} END{commands}&#39; input-file</code></p>
<p>下面的流程图描述了awk的工作流程：</p>
<p><img src="/images/2019-09-22-215236.png" alt></p>
<p>1、通过关键字 BEGIN 执行 BEGIN 块的内容，即 BEGIN 后花括号 {} 的内容。</p>
<p>2、完成 BEGIN 块的执行，开始执行body块。</p>
<p>3、读入有 \n 换行符分割的记录。</p>
<p>4、将记录按指定的域分隔符划分域，填充域，$0 则表示所有域(即一行内容)，$1 表示第一个域，$n 表示第 n 个域。</p>
<p>5、依次执行各 BODY 块，pattern 部分匹配该行内容成功后，才会执行 awk-commands 的内容。</p>
</li>
</ul>
</li>
</ul>
<p>​               6、循环读取并执行各行直到文件结束，完成body块执行。</p>
<p>​              7、开始 END 块执行，END 块可以输出最终结果。</p>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a><strong>grep</strong></h3><ul>
<li><p><strong>格式</strong></p>
<p><code>grep [option] pattern file</code></p>
</li>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-c    --count   <span class="comment">#计算符合样式的列数。   </span></span><br><span class="line">-C&lt;显示行数&gt;    --context=&lt;显示行数&gt;或-&lt;显示行数&gt;   <span class="comment">#除了显示符合样式的那一行之外，并显示该行之前后的内容。   </span></span><br><span class="line">-d &lt;动作&gt;      --directories=&lt;动作&gt;   <span class="comment">#当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。   </span></span><br><span class="line">-e&lt;范本样式&gt;  --regexp=&lt;范本样式&gt;   <span class="comment">#指定字符串做为查找文件内容的样式。   </span></span><br><span class="line">-E      --extended-regexp   <span class="comment">#将样式为延伸的普通表示法来使用。   </span></span><br><span class="line">-f&lt;规则文件&gt;  --file=&lt;规则文件&gt;   <span class="comment">#指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。   </span></span><br><span class="line"></span><br><span class="line">-i    --ignore-case   <span class="comment">#忽略字符大小写的差别。   </span></span><br><span class="line">-l    --file-with-matches   <span class="comment">#列出文件内容符合指定的样式的文件名称。      </span></span><br><span class="line">-n   --line-number   <span class="comment">#在显示符合样式的那一行之前，标示出该行的列数编号。   </span></span><br><span class="line">-q   --quiet或--silent   <span class="comment">#不显示任何信息。   </span></span><br><span class="line">-s   --no-messages   <span class="comment">#不显示错误信息。   </span></span><br><span class="line">-v   --revert-match   <span class="comment">#显示不包含匹配文本的所有行。     </span></span><br><span class="line">-w   --word-regexp   <span class="comment">#只显示全字符合的列。   </span></span><br><span class="line">-x    --line-regexp   <span class="comment">#只显示全列符合的列。   </span></span><br><span class="line">-y   <span class="comment">#此参数的效果和指定“-i”参数相同。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux|grep \[s]sh  <span class="comment"># 不显示本身进程</span></span><br><span class="line">$ ps aux | grep ssh | grep -v <span class="string">"grep"</span>  <span class="comment"># 不显示本身进程</span></span><br><span class="line">$ cat test.txt |grep hat$  <span class="comment"># 输出以hat结尾的行内容</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a><strong>vim</strong></h3><ul>
<li><p><strong>替换字符串</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:[range]s/pattern/string/[c,e,gi]   <span class="comment"># :[作用范围]s/[目标]/[替换]/[替换标志]</span></span><br><span class="line">	c 询问</span><br><span class="line">	e 忽略错误提示</span><br><span class="line">	g 替换匹配到的行的所有pattern</span><br><span class="line">	i 忽略大小写</span><br><span class="line">	</span><br><span class="line">:.,<span class="variable">$d</span>  <span class="comment"># 表示从当前行至最后一行全部删除掉</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>正则</strong></p>
<p>pattern 支持基础正则，不支持扩展正则</p>
<p>*. / \ ^ $ 这些符号有特殊意义，要显示字面意思的话，需要转义 \</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">:s/pattern/string/iec      替换当前行匹配到的第一个pattern，</span><br><span class="line">:s/pattern/string/gc       替换当前行匹配到的所有pattern，并询问</span><br><span class="line">:7,<span class="variable">$s</span>/pattern/string/      替换第n行至最后一行匹配第一个pattern</span><br><span class="line">:.,5s/pattern/string/gc    替换第当前行至第5行匹配到的所有pattern， 并询问</span><br><span class="line">:%s/pattern/string/gc      替换所有行匹配到的所有pattern， 并询问</span><br><span class="line">:3,15s/pattern/string/gc   替换第3行至第15行匹配到的所有pattern，并询问</span><br><span class="line">:3,8s/^<span class="comment">#//c                取消第3-8行的注释</span></span><br><span class="line">:7,13s/.*//g               清空第7-13行</span><br><span class="line"></span><br><span class="line">:g/pattern/d               全局匹配，并删除匹配到的行</span><br><span class="line">:3,14g/pattern/d           匹配第3-14行，并删除匹配到的行</span><br><span class="line">:g!/pattern/d              全局匹配，并删除没有匹配到的行</span><br><span class="line">:g/^<span class="comment">#/d                    删除所有的注释行</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>vim个性化配置</strong></p>
<p><code>vim /etc/vimrc</code>    # CentOS7路径</p>
<p><code>vim /etc/vim/vimrc</code>  # Ubuntu路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible	 <span class="comment">#不与vi兼容</span></span><br><span class="line"><span class="built_in">set</span> showmode	     <span class="comment">#在底部显示，当前处于命令模式还是插入模式</span></span><br><span class="line"><span class="built_in">set</span> nu  			 <span class="comment">#设置行号</span></span><br><span class="line"><span class="built_in">set</span> showcmd 	     <span class="comment">#在底部显示当前输入的指令</span></span><br><span class="line"><span class="built_in">set</span> tabstop=4  	     <span class="comment">#tab退四格</span></span><br><span class="line"><span class="built_in">set</span> encoding=utf-8   <span class="comment">#使用utf-8编码</span></span><br><span class="line">syntax on  		     <span class="comment">#语法高亮</span></span><br><span class="line"><span class="built_in">set</span> showmatch	     <span class="comment">#当输入一个左括号时会匹配相应的右括号</span></span><br><span class="line"><span class="built_in">set</span> backspace=2      <span class="comment">#设置退格键可用</span></span><br><span class="line"><span class="built_in">set</span> autoindent 	     <span class="comment">#按下回车键后，下一行的缩进会自动跟上一行的缩进保持一致</span></span><br><span class="line"><span class="built_in">set</span> relativenumber   <span class="comment">#显示光标所在的当前行的行号，其他行都为相对于该行的相对行号</span></span><br><span class="line"><span class="built_in">set</span> cursorline       <span class="comment">#光标所在的当前行高亮</span></span><br><span class="line"><span class="built_in">set</span> ruler 			 <span class="comment">#在状态栏显示光标的当前位置（位于哪一行哪一列）</span></span><br><span class="line"><span class="built_in">set</span> hlsearch	     <span class="comment">#搜索时，高亮显示匹配结果</span></span><br><span class="line"><span class="built_in">set</span> incsearch        <span class="comment">#输入搜索模式时，每输入一个字符，就自动跳到第一个匹配的结果</span></span><br><span class="line"><span class="built_in">set</span> ignorecase 	     <span class="comment">#搜索时忽略大小写</span></span><br><span class="line"><span class="built_in">set</span> noerrorbells 	 <span class="comment">#出错时，不要发出响声</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a><strong>sed</strong></h3><ul>
<li><p><strong>格式</strong></p>
<p><code>sed [option] commands [inputfile...]</code></p>
</li>
<li><p><strong>[option]</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-n  使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。</span><br><span class="line">-f  从脚本文件中读取命令</span><br><span class="line">-i  直接编辑原文件</span><br><span class="line">-r  使用正则扩展表达式</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>commands</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a  新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</span><br><span class="line">c  取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</span><br><span class="line">d  删除，因为是删除啊，所以 d 后面通常不接任何咚咚；</span><br><span class="line">i  插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</span><br><span class="line">p  列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～</span><br><span class="line">s  取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'2,5d'</span> input_file          <span class="comment">#删除2至5行的内容</span></span><br><span class="line">$ sed <span class="string">'2,$d'</span> input_file          <span class="comment">#删除2至最后一行的内容</span></span><br><span class="line">$ sed <span class="string">'2a drink tea'</span> input_file  <span class="comment">#在第2行的下一行(也就是第三行)添加'drink tea'</span></span><br><span class="line">$ sed <span class="string">'2i drink tea'</span>  input_file <span class="comment">#在第2行的上一行(也就是第一行)插入'drink tea'</span></span><br><span class="line">$ sed -n <span class="string">'5,7p'</span>  input_file      <span class="comment">#列出5-7行的内容</span></span><br><span class="line">$ sed <span class="string">'3,5c drink tea'</span>           <span class="comment">#把3-5行的内容替换为'drink tea'</span></span><br><span class="line">$ sed <span class="string">'s/要被取代的字符串/新的字符串/g'</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a><strong>wc</strong></h3><ul>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-c 统计字节数。</span><br><span class="line">-l 统计行数。</span><br><span class="line">-m 统计字符数。这个标志不能与 -c 标志一起使用。</span><br><span class="line">-w 统计字数。一个字被定义为由空白、跳格或换行字符分隔的字符串。</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wc file</span><br><span class="line"></span><br><span class="line">318  1077 8894 test.txt   </span><br><span class="line">行数 字数  字节数</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a><strong>cut</strong></h3><ul>
<li><p><strong>格式</strong></p>
<p><code>cut [-df] [input_filel]</code></p>
</li>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</span><br><span class="line">-c ：以字符为单位进行分割。</span><br><span class="line">-d ：自定义分隔符，默认为制表符。</span><br><span class="line">-f ：与-d一起使用，指定显示哪个字段。</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cut -d<span class="string">':'</span> -f 1-3,5 input_file   <span class="comment">#以":"为分隔符, 提取第1-3和第5个字段</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a><strong>sort</strong></h3><ul>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-b：忽略每行前面开始出的空格字符；</span><br><span class="line">-c：检查文件是否已经按照顺序排序；</span><br><span class="line">-d：排序时，处理英文字母、数字及空格字符外，忽略其他的字符；</span><br><span class="line">-f：排序时，将小写字母视为大写字母；</span><br><span class="line">-i：排序时，除了040至176之间的ASCII字符外，忽略其他的字符；</span><br><span class="line">-m：将几个排序号的文件进行合并；</span><br><span class="line">-M：将前面3个字母依照月份的缩写进行排序；</span><br><span class="line">-n：依照数值的大小排序；</span><br><span class="line">-o&lt;输出文件&gt;：将排序后的结果存入制定的文件；</span><br><span class="line">-r：以相反的顺序来排序；</span><br><span class="line">-t&lt;分隔字符&gt;：指定排序时所用的栏位分隔字符；</span><br><span class="line">-k 指定排序时依据的字段。</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -t<span class="string">':'</span> -k 4 /etc/passwd  <span class="comment"># ：(分号)为分隔符，按数值大小，以第四个字段排序</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a><strong>cp</strong></h3><ul>
<li><p><strong>格式</strong></p>
<p><code>cp [option] file_source file_destination</code></p>
</li>
<li><p><strong>参数</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-a ：相当于 -pdr 的意思；</span><br><span class="line">-d ：若来源文件为连结文件的属性(link file)，则复制连结文件属性而非档案本身；</span><br><span class="line">-f ：为强制 (force) 的意思，若有重复或其它疑问时，不会询问使用者，而强制复制；</span><br><span class="line">-i ：若目的檔(destination)已经存在时，在覆盖时会先询问是否真的动作！</span><br><span class="line">-l ：进行硬式连结 (hard link) 的连结档建立，而非复制档案本身；</span><br><span class="line">-p ：连同档案的属性一起复制过去，而非使用预设属性；</span><br><span class="line">-r ：递归持续复制，用于目录的复制行为；</span><br><span class="line">-s ：复制成为符号连结文件 (symbolic link)，亦即『快捷方式』档案；</span><br><span class="line">-u ：若 destination 比 <span class="built_in">source</span> 旧才更新 destination</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a><strong>iptables</strong></h3><ul>
<li><p><strong>类型</strong></p>
<p>链的类型：prerouting链，input链，output链，postrouting链,，forward链</p>
<p>表的类型： raw表，mangle表， filter表，nat表</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sevice iptables save   <span class="comment"># CentOS 6保存规则, 默认在 /etc/sysconfig/iptables</span></span><br><span class="line">$ service iptables start   <span class="comment"># 启动iptables服务</span></span><br><span class="line">$ <span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward  <span class="comment"># 开启内核端口转发</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -t filter -L  <span class="comment"># 查看filter表中的规则</span></span><br><span class="line">$ iptables -t filter -vnxL INPUT  <span class="comment"># 查看filter表中 input链的规则</span></span><br><span class="line">    -v 显示详细信息</span><br><span class="line">    -n 不解析IP地址</span><br><span class="line">    -x 显示计数器精确值</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -F INPUT   <span class="comment"># 清空 INPUT链中的规则</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 源地址为172.20.10.7的ip在INPUT链上DROP</span></span><br><span class="line">$ iptables -t filter -[I][A] INPUT -s 172.20.10.7 -j DROP </span><br><span class="line">    -I 将规则添加到链的首部</span><br><span class="line">    -l INPUT 3 表示在INPUT链中新增规则, 新增的规则的编号为2</span><br><span class="line">    -A 将规则添加在链的尾部</span><br><span class="line">    -s 源地址</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除INPUT链中的第三条规则</span></span><br><span class="line">$ iptables -t filter -D INPUT 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据条件和动作删除规则</span></span><br><span class="line">$ iptables -t nat -D OUTPUT -p tcp -j REDSOCKS</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改INPUT链上的默认动作为DROP</span></span><br><span class="line">$ iptables -t filter -P FORWARD DROP</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配一个网段</span></span><br><span class="line">$ iptables -t filter -A INPUT -s 10.6.0.0/16 -j DROP</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只要源地址不是192.168.1.146 就接受此报文</span></span><br><span class="line">$ iptables -t filter -A INPUT ! -s 192.168.1.146 -j ACCEPT</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 丢掉源地址为192.168.1.146, 目标地址为192.168.1.156, 协议为tcp的报文</span></span><br><span class="line">$ iptables -t filter -A INPUT -s 192.168.1.146 -d 192.168.1.156 -p tcp -j DROP</span><br><span class="line">-s 源地址</span><br><span class="line">-d 目的地址</span><br><span class="line">-p 协议类型</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拒绝由网卡 eth4 流入 的ping请求报文</span></span><br><span class="line">$ iptables -t filter -A INPUT -i eth4 -p icmp -j REJECT</span><br><span class="line">-i 网卡名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拒绝由网卡 eth4 流出 的ping请求报文</span></span><br><span class="line">$ iptables -t filter -A INPUT -o eth4 -p icmp -j REJECT</span><br><span class="line">-o 网卡名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配源地址为192.168.1.146, 协议为tcp, 目的端口为22(使用扩展模块tcp)</span></span><br><span class="line">$ iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m tcp --dport 22 -j REJECT</span><br><span class="line">-m 扩展模块名(一般与协议名相同)</span><br><span class="line">--dport 目的端口号</span><br><span class="line">--sport 源端口号</span><br><span class="line">--dport 32:100  匹配32号至100号端口</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在filter表中创建自定义链</span></span><br><span class="line">$ iptables -t filter -N IN_WEB</span><br><span class="line">-N 自定义链的名字</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在自定义链中创建规则</span></span><br><span class="line">$ iptables -t filter -I IN_WEB -s 192.168.1.139 -j REJECT</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在filter表中的INPUT链中引用自定义链IN_WEB</span></span><br><span class="line">$ iptables -t filter -I INPUT -j IN_WEB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除自定义链(1.自定义链没有被引用 2.自定义链中没有任何规则)</span></span><br><span class="line">$ iptables -t filter -X IN_WEB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在nat表, POSTROUTING链中将源地址10.1.0.0转成 192.168.1.146</span></span><br><span class="line">$ iptables -t nat -A POSTROUTING -s 10.1.0.0/16 -j SNAT --to-source 192.168.1.146</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当目的地址为192.168.1.146, 目的端口为80时, 将目的地址改为10.1.0.1:80</span></span><br><span class="line">$ iptables -t nat -A PREROUTING -d 192.168.1.146 -p tcp --dport 80 -j DNAT --to-destination 10.1.0.1:80</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把所有经过路由前PREROUTING的流量重定向至本机的12345端口</span></span><br><span class="line">$ iptables -t nat -A PREROUTING -p tcp -j REDIRECT --to-ports 12345</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把所有出站OUTPUT的流量重定向至本机的12345端口</span></span><br><span class="line">$ iptables -t nat -A OUTPUT -p tcp -j REDIRECT --to-ports 12345</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a><strong>firewall</strong></h3><ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd –reload  <span class="comment"># 重新加载</span></span><br><span class="line">$ systemctl stop firewalld.service  <span class="comment"># 停止firewall</span></span><br><span class="line">$ systemctl <span class="built_in">disable</span> firewalld.service  <span class="comment"># 禁止firewall开机启动</span></span><br><span class="line">$ firewall-cmd –state     <span class="comment"># 查看防火墙状态</span></span><br><span class="line">$ firewall-cmd --list-all   <span class="comment"># 检查防火墙规则</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="selinux"><a href="#selinux" class="headerlink" title="selinux"></a><strong>selinux</strong></h3><ul>
<li><p><strong>例子</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ getenforce <span class="comment">#状态查看</span></span><br><span class="line">$ vi /etc/selinux/config</span><br><span class="line"></span><br><span class="line">    SELINUX=disabled <span class="comment">#停用，重启生效</span></span><br></pre></td></tr></table></figure>

</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/在GitHub部署Hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GuGuBang Zu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GuGuBang Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/在GitHub部署Hexo/" itemprop="url">在GitHub部署Hexo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-20T22:46:33+00:00">
                2019-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  598
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a><strong>前言</strong></h3><p>在上一篇博客【<a href="/source/_posts/树莓派3b+搭建Hexo博客">树莓派3b+搭建Hexo博客</a>】已经介绍了如何在本地搭建Hexo，接下来将生成的网页文件部署到<a href="https://pages.github.com" target="_blank" rel="noopener">Github Pages</a> 上去，GitHub稳定且免费，比较适合静态网页的部署。</p>
<h3 id="一、创建GitHub个人仓库"><a href="#一、创建GitHub个人仓库" class="headerlink" title="一、创建GitHub个人仓库"></a><strong>一、创建GitHub个人仓库</strong></h3><p>[<a href="https://github.com/new" target="_blank" rel="noopener">new repository</a>] <a href="https://github.com/new" target="_blank" rel="noopener">https://github.com/new</a></p>
<p><img src="/images/2019-09-20-182239.png" alt></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/在GitHub部署Hexo/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Ubuntu编译运行Redsocks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GuGuBang Zu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GuGuBang Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Ubuntu编译运行Redsocks/" itemprop="url">Ubuntu编译运行Redsocks</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-14T00:00:00+00:00">
                2019-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  118
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>本文记录在x86架构下用Ubuntu编译redsocks</p>
<ol>
<li><p>在GitHub上获取redsocks源码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/darkk/redsocks.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装编译所依赖的库和工具</p>
<ul>
<li>libevent2-dev</li>
<li>openssl</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install make</span><br><span class="line">$ sudo apt install gcc</span><br><span class="line">$ sudo apt install libevent-dev</span><br><span class="line">$ sudo apt install openssl</span><br></pre></td></tr></table></figure>

</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/Ubuntu编译运行Redsocks/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/树莓派3b+搭建Hexo博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="GuGuBang Zu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GuGuBang Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/树莓派3b+搭建Hexo博客/" itemprop="url">树莓派3b+ 搭建 Hexo 博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-13T22:46:33+00:00">
                2019-09-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  796
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Hexo 是一个开源的博客框架，本文记录在树莓派上搭建Hexo 的过程。</p>
<h3 id="一、安装-Node-js-和-Hexo"><a href="#一、安装-Node-js-和-Hexo" class="headerlink" title="一、安装 Node.js 和 Hexo"></a><strong>一、安装 Node.js 和 Hexo</strong></h3><p>树莓派自带的 node.js 没有 npm，用<code>sudo apt install npm</code>下载的 npm 会报错，如下:<br>(node:8449) [DEP0022] DeprecationWarning: os.tmpDir() is deprecated. Use os.tmpdir() instead.*</p>
<p><em><strong>PS：由于访问国外网速太慢，会导致有些步骤卡死。最好挂上代理。</strong></em></p>
<ul>
<li><p><strong>卸载树莓派自带的 node.js</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt remove node</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>通过 nvm 安装 node.js</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载 nvm 安装脚本</span></span><br><span class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash</span><br><span class="line"><span class="comment"># 不用重启，使其立即生效</span></span><br><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="comment"># 查看 nvm 版本</span></span><br><span class="line">$ nvm --version</span><br><span class="line"><span class="comment"># 选择可用的 node.js 版本，这里选择 stable 即稳定版</span></span><br><span class="line">$ nvm install stable</span><br><span class="line"><span class="comment"># 查看 node.js 和 npm 版本号，看 node.js 和 npm 是否安装成功</span></span><br><span class="line">$ node -v; npm -v</span><br></pre></td></tr></table></figure>

</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/树莓派3b+搭建Hexo博客/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="GuGuBang Zu">
            
              <p class="site-author-name" itemprop="name">GuGuBang Zu</p>
              <p class="site-description motion-element" itemprop="description">学习Linux的过程以及生活!</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/GuGuBang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GuGuBang Zu</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">6.5k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>



  <div class="footer-custom">Hosted by <a target="_blank" href="https://github.com/GuGuBang/gugubang.github.io">GitHub Pages</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
